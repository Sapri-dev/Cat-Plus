<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cat Plus</title>
  <!-- style akan disisipkan secara dinamis bila ditemukan di manifest -->
</head>
<body>
  <div id="app"><!-- App akan dirender oleh JS --></div>

  <script>
    // Ambil manifest yang dihasilkan Vite (public/build/manifest.json)
    // lalu sisipkan CSS dan JS hashed yang sesuai.
    (async function () {
      try {
        const resp = await fetch('/build/manifest.json');
        if (!resp.ok) throw new Error('Manifest tidak ditemukan: ' + resp.status);
        const manifest = await resp.json();

        // Cari entri yang mengarah ke app.js (entry yang didefinisikan di vite input)
        const entryKey = Object.keys(manifest).find(k => k.endsWith('app.js') || k.endsWith('/app.js'));
        if (!entryKey) {
          console.warn('Entry app.js tidak ditemukan di manifest', manifest);
          return;
        }

        const entry = manifest[entryKey];

        // Sisipkan CSS (jika ada)
        if (entry.css && entry.css.length) {
          entry.css.forEach(cssFile => {
            const link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = '/build/' + cssFile;
            document.head.appendChild(link);
          });
        }

        // Sisipkan JS (module)
        const script = document.createElement('script');
        script.type = 'module';
        script.src = '/build/' + entry.file;
        document.body.appendChild(script);
      } catch (err) {
        console.error('Gagal memuat asset dari manifest:', err);
      }
    })();
  </script>
</body>
</html>